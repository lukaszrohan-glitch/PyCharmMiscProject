# Logrotate configuration for Arkuszownia SMB application

/app/logs/*.log /var/log/nginx/*.log {
    daily
    rotate 7
    missingok
    notifempty
    compress
    delaycompress
    copytruncate
    sharedscripts
    postrotate
        # Reload nginx if logs were rotated
        if [ -f /var/run/nginx.pid ]; then
            nginx -s reload 2>/dev/null || true
        fi
    endscript
}

# Separate configuration for nginx access logs (verbose)
/var/log/nginx/access.log {
    daily
    rotate 14
    missingok
    notifempty
    compress
    delaycompress
    copytruncate
}

# PostgreSQL logs (if stored outside container)
/var/lib/postgresql/logs/*.log {
    daily
    rotate 7
    missingok
    notifempty
    compress
    delaycompress
    copytruncate
}
